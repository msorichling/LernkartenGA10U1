<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards Unit 1</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@600&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* Einheitliche Farbpalette für Unit 1 (Cyan/Türkis) */
        :root {
            --color-primary: #00bcd4; 
            --color-secondary: #00838f; 
            --color-background: #e0f7fa; 
            --color-text: #263238;
            --color-success: #43a047;
            --color-error: #e53935;
            --color-card: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.15);
        }
        
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 20px;
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, var(--color-background) 0%, var(--color-primary) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .main-container {
            background: var(--color-card);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            max-width: 800px;
            width: 95%;
            margin-top: 5vh;
            border: 1px solid var(--color-primary);
            text-align: center;
        }

        .title {
            font-family: 'Caveat', cursive;
            font-size: 38px;
            font-weight: 600;
            color: var(--color-secondary);
            margin-bottom: 20px;
            border-bottom: 2px solid var(--color-primary);
            padding-bottom: 10px;
        }

        /* --- CARD STYLING --- */
        .card-container {
            perspective: 1000px; 
            margin: 40px auto;
            width: 100%;
            max-width: 450px;
            height: 300px;
        }

        .flashcard {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            box-shadow: var(--shadow);
            border-radius: 15px;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 15px;
            font-size: 1.5em;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            line-height: 1.4;
        }

        .card-front {
            background-color: var(--color-primary);
            color: var(--color-text);
            border: 3px solid var(--color-secondary);
        }

        .card-back {
            background-color: var(--color-card);
            color: var(--color-text);
            transform: rotateY(180deg);
            border: 3px solid var(--color-secondary);
        }
        
        .card-back .solution-text {
            font-size: 1.2em;
            color: var(--color-secondary);
            font-weight: 700;
        }

        .card-back .context-text {
            font-size: 0.9em;
            margin-top: 10px;
        }

        /* --- CONTROLS --- */
        .input-area {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .input-area input {
            padding: 10px;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 1em;
            width: 250px;
        }
        
        .check-button, .flip-button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 700;
        }

        .check-button {
            background-color: var(--color-secondary);
            color: white;
        }
        .check-button:hover {
            background-color: var(--color-primary);
            color: var(--color-text);
        }

        .flip-button {
            background-color: #f0f0f0;
            color: var(--color-text);
        }

        .message-box {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: 700;
            min-height: 20px;
        }
        
        .message-box.success {
            background-color: var(--color-success);
            color: white;
        }
        
        .message-box.error {
            background-color: var(--color-error);
            color: white;
        }

        .counter {
            margin-top: 20px;
            font-size: 0.9em;
            color: var(--color-text);
        }
        
        .navigation {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        .nav-button {
            padding: 10px 20px;
            background-color: var(--color-primary);
            color: var(--color-text);
            border: 2px solid var(--color-secondary);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: opacity 0.3s;
        }
        
        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

    </style>
</head>
<body>
    
    <div class="main-container">
        <h1 class="title">Flashcards Unit 1</h1>
        
        <div class="card-container">
            <div class="flashcard" id="flashcard" onclick="flipCard()">
                <div class="card-face card-front" id="cardFront">
                    <!-- Front content -->
                </div>
                <div class="card-face card-back" id="cardBack">
                    <!-- Back content -->
                </div>
            </div>
        </div>

        <div class="input-area">
            <input type="text" id="answerInput" placeholder="Deine Antwort eingeben">
            <button class="check-button" onclick="checkAnswer()">Prüfen</button>
        </div>
        
        <div class="message-box" id="messageBox"></div>

        <div class="counter" id="cardCounter"></div>
        
        <div class="navigation">
            <button class="nav-button" id="prevButton" onclick="changeCard(-1)" disabled>← Zurück</button>
            <button class="nav-button" id="nextButton" onclick="changeCard(1)" disabled>Nächste →</button>
        </div>
    </div>

    <script>
        // #######################################################
        // 1. ÜBUNGSDATEN (Glossar Unit 1)
        // Format: {term: 'Begriff auf Deutsch', definition: 'Übersetzung / Erklärung'}
        // #######################################################
        const flashcardData = [
            { term: "Erkenntnis gewinnen", definition: "to gain recognition" },
            { term: "jemanden bewundern", definition: "to look up to somebody" },
            { term: "unwahrscheinlich", definition: "unlikely" },
            { term: "Schlaf", definition: "shut-eye" },
            { term: "sich etwas aneignen", definition: "to take on" },
            { term: "Einsicht bekommen", definition: "to get an insight" },
            { term: "aufschieben", definition: "to put off" },
            { term: "mit etwas fertig werden", definition: "to come to terms with sth." },
            { term: "von etwas schockiert sein", definition: "to be taken aback by sth." },
            { term: "etwas verpassen", definition: "to miss out on sth." },
            { term: "verletzt", definition: "injured" },
            { term: "der Öffentlichkeit bekannt machen", definition: "to go public with sth." },
            { term: "mit jemanden in Kontakt bleiben", definition: "to keep in touch with sb." },
            { term: "Fähigkeit / Kapazität", definition: "capacity" },
            { term: "einem Risiko ausgesetzt", definition: "at risk" },
            { term: "verankert sein / stecken bleiben", definition: "to be stuck" },
            { term: "sicher sein / müssen", definition: "to be bound to" },
            { term: "von etwas überzeugt sein", definition: "to be certain of sth." },
            { term: "eine Entscheidung treffen", definition: "to make up one's mind" },
            { term: "etwas kaum schaffen", definition: "to manage to do sth." }
        ];

        let currentCardIndex = 0;
        let attempts = 0;
        const maxAttempts = 3;
        let isFlipped = false;

        // #######################################################
        // 2. DOM ELEMENTE
        // #######################################################
        const flashcard = document.getElementById('flashcard');
        const cardFront = document.getElementById('cardFront');
        const cardBack = document.getElementById('cardBack');
        const answerInput = document.getElementById('answerInput');
        const messageBox = document.getElementById('messageBox');
        const cardCounter = document.getElementById('cardCounter');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');

        // #######################################################
        // 3. FUNKTIONEN
        // #######################################################
        
        function updateCardContent() {
            const card = flashcardData[currentCardIndex];
            
            // Vorderseite (Deutsch/Begriff)
            cardFront.innerHTML = `
                <div class="term-text">${card.term}</div>
            `;
            
            // Rückseite (Englisch/Übersetzung)
            cardBack.innerHTML = `
                <div class="solution-text">${card.definition}</div>
            `;
            
            // Status-Anzeige
            cardCounter.textContent = `Karte ${currentCardIndex + 1} von ${flashcardData.length}`;
            
            // Navigations-Buttons
            prevButton.disabled = currentCardIndex === 0;
            nextButton.disabled = currentCardIndex === flashcardData.length - 1;

            // Zustand zurücksetzen
            resetCardState();
        }

        function resetCardState() {
            flashcard.classList.remove('flipped');
            isFlipped = false;
            answerInput.value = '';
            messageBox.textContent = '';
            messageBox.classList.remove('success', 'error');
            attempts = 0;
            answerInput.disabled = false;
        }

        function flipCard() {
            if (isFlipped) return; // Wenn bereits umgedreht, nichts tun
            
            // NEUE LOGIK: Karte nur umdrehen, wenn 3 Versuche fehlgeschlagen sind
            if (attempts < maxAttempts) {
                setMessage('error', `Bitte gib zuerst deine Antwort ein und prüfe sie. Du kannst die Lösung nach ${maxAttempts} Versuchen aufdecken.`);
                return;
            }
            
            flashcard.classList.add('flipped');
            isFlipped = true;
            answerInput.disabled = true;
            setMessage('success', `Lösung aufgedeckt nach ${attempts} Versuchen.`);
        }
        
        function normalizeAnswer(input) {
            // NUR Leerzeichen am Anfang/Ende entfernen. Groß-/Kleinschreibung WIRD beachtet.
            return input.trim();
        }

        function checkAnswer() {
            const userInput = answerInput.value;
            const correctAnswer = flashcardData[currentCardIndex].definition;
            
            if (isFlipped) return; // Nicht prüfen, wenn Karte bereits umgedreht

            if (userInput.trim() === '') {
                setMessage('error', 'Bitte gib eine Antwort ein, bevor du prüfst.');
                return;
            }

            // Prüfung auf Gleichheit inkl. Groß-/Kleinschreibung
            if (normalizeAnswer(userInput) === normalizeAnswer(correctAnswer)) {
                // Korrekte Antwort
                answerInput.disabled = true;
                flashcard.classList.add('flipped');
                isFlipped = true;
                setMessage('success', 'Korrekt! Gut gemacht.');
            } else {
                // Falsche Antwort
                attempts++;
                if (attempts >= maxAttempts) {
                    setMessage('error', `Falsch! Maximale Versuche (${maxAttempts}) erreicht. Tippe auf die Karte, um die Lösung zu sehen.`);
                } else {
                    setMessage('error', `Falsch. Versuch ${attempts} von ${maxAttempts}.`);
                }
            }
        }

        function setMessage(type, text) {
            messageBox.textContent = text;
            messageBox.classList.remove('success', 'error');
            messageBox.classList.add(type);
        }

        function changeCard(direction) {
            let newIndex = currentCardIndex + direction;
            if (newIndex >= 0 && newIndex < flashcardData.length) {
                currentCardIndex = newIndex;
                updateCardContent();
            }
        }

        // Initialisierung
        document.addEventListener('DOMContentLoaded', updateCardContent);
    </script>
</body>
</html>
